<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Registration Form</title>

    <style>
        :root{
          --bg-start: #667eea;     /* gradient start */
          --bg-end: #764ba2;       /*  end */
          --card: rgba(255,255,255,0.82);
          --input-bg: rgba(255,255,255,0.92);
          --accent:#0b5ed7;
          --muted-text:#95a0b3;
          --danger:#d9534f;
          --ok:#198754;
          --radius:12px;
        }

        *{box-sizing:border-box}
        html,body{height:100%}
        body{
          margin:0;
          font-family:Inter, "Segoe UI", Roboto, Arial, sans-serif;
          /* full-screen fixed gradient to avoid visible banding */
          background: linear-gradient(135deg, var(--bg-start) 0%, var(--bg-end) 100%);
          background-attachment: fixed;
          background-repeat: no-repeat;
          background-size: cover;
          display:flex;
          align-items:flex-start;
          justify-content:center;
          padding:48px 16px;
          color:#0f1724;
          -webkit-font-smoothing:antialiased;
          -moz-osx-font-smoothing:grayscale;
          min-height:100vh;
        }

        .container{
          width:100%;
          max-width:960px;
          background: var(--card);
          border-radius:var(--radius);
          box-shadow: 0 10px 26px rgba(8,10,30,0.12);
          padding:28px;
          overflow:hidden;
          border: 1px solid rgba(255,255,255,0.05);
          -webkit-backdrop-filter: blur(6px);
          backdrop-filter: blur(6px);
        }

        h2{
          margin:0 0 6px;
          font-size:22px;
          letter-spacing:0.2px;
          color:#0b1220;
        }
        p.lead{
          margin:0 0 18px;
          color:var(--muted-text);
          font-size:13px;
        }

        form{
          display:grid;
          grid-template-columns:repeat(2,1fr);
          gap:14px;
          align-items:start;
        }

        label{display:block;font-size:13px;color:#0b1220;margin-bottom:6px}
        input[type="text"], input[type="email"], input[type="password"], input[type="number"], select, textarea {
          width:100%;
          padding:10px 12px;
          /* lighter border and translucent background */
          border:1px solid rgba(11,94,215,0.06);
          border-radius:10px;
          font-size:14px;
          background: var(--input-bg);
          transition:box-shadow .15s, border-color .15s, transform .08s;
          color:#0b1220;
        }

           input[type="text"],
           input[type="email"],
           input[type="password"],
           input[type="number"],
           textarea,
           select {
               font-family: "Times New Roman", serif;
           }
        textarea{resize:vertical;min-height:78px}

        input:focus, select:focus, textarea:focus{
          outline:none;
          border-color: rgba(102,126,234,0.95);
          box-shadow: 0 8px 20px rgba(102,126,234,0.08);
          transform: translateY(-1px);
          background: rgba(255,255,255,0.96); /* slightly brighten on focus */
        }

        .full{grid-column:1 / -1}
        .small{width:100%}
        .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}

        /* error look */
        .error { border-color:var(--danger) !important; background:#fff6f6 }
        .error-text{color:var(--danger);font-size:12px;margin-top:6px;display:none}

        /* buttons */
        .actions{grid-column:1 / -1;display:flex;gap:12px;align-items:center;margin-top:10px}
        button{
          background:var(--accent);
          color:#fff;border:0;padding:12px 16px;border-radius:10px;cursor:pointer;font-weight:600;
          box-shadow:0 10px 24px rgba(11,94,215,0.16);
          transition:transform .12s ease, box-shadow .12s ease;
        }
        button:hover{ transform: translateY(-3px) }
        button[disabled]{opacity:.55;cursor:not-allowed;box-shadow:none;transform:none}

        button.secondary{
          background:transparent;color:var(--accent);border:1px solid rgba(11,94,215,0.10);box-shadow:none;font-weight:600;
        }

        .meter{height:9px;border-radius:8px;background:rgba(238,243,251,0.6);margin-top:8px;overflow:hidden}
        .meter-fill{height:100%;width:0%;background:#ccc;transition:width .2s ease}

        .note{font-size:13px;color:var(--muted-text)}
        .help{font-size:12px;color:#6b7280}

        /* responsive tweaks */
        @media (max-width:820px){
          form{grid-template-columns:1fr}
          .actions{flex-direction:column;align-items:stretch}
          .container{padding:20px}
          body{padding:26px 12px}
        }
    </style>

</head>
<body>
<div class="container">
    <h2>Intelligent Registration System</h2>
    <p class="lead">All required fields are marked with *. Fill the form to register.</p>

    <form id="regForm" novalidate>
        <!-- First Name -->
        <div>
            <label for="firstName">First Name *</label>
            <input type="text" id="firstName" />
            <div id="firstNameError" class="error-text"></div>
        </div>

        <!-- Last Name -->
        <div>
            <label for="lastName">Last Name *</label>
            <input type="text" id="lastName" />
            <div id="lastNameError" class="error-text"></div>
        </div>

        <!-- Email -->
        <div>
            <label for="email">Email *</label>
            <input type="email" id="email" />
            <div id="emailError" class="error-text"></div>
        </div>

        <!-- Phone (country code readonly + number) -->
        <div>
            <label for="phoneNumber">Phone Number *</label>
            <div style="display:flex;gap:8px;align-items:center;">
                <input id="countryCode" type="text" value="+91" readonly style="width:110px;padding:10px;border-radius:8px;border:1px solid #e6eef8;background:#f6f9ff;font-weight:600;">
                <input id="phoneNumber" name="phoneNumber" type="text" placeholder="Enter mobile number" style="flex:1;padding:10px;border-radius:8px;border:1px solid #e6eef8;">
            </div>
            <div id="phoneError" class="error-text"></div>
            <div class="help" style="margin-top:6px;">Country code is fixed — enter local number only (no country code here).</div>
        </div>


        <!-- Gender -->
        <div>
            <label>Gender *</label>
            <div class="row" style="align-items:center; margin-top:6px;">
                <label style="display:flex;align-items:center;gap:6px">
                    <input type="radio" name="gender" value="Male" id="genderMale"> Male
                </label>
                <label style="display:flex;align-items:center;gap:6px">
                    <input type="radio" name="gender" value="Female" id="genderFemale"> Female
                </label>
                <label style="display:flex;align-items:center;gap:6px">
                    <input type="radio" name="gender" value="Other" id="genderOther"> Other
                </label>
            </div>
            <div id="genderError" class="error-text"></div>
        </div>

        <!-- DOB + Age -->
        <div>
            <label for="dob">Date of Birth (YYYY-MM-DD) *</label>
            <input type="text" id="dob" placeholder="YYYY-MM-DD" maxlength="10" />
            <div id="dobError" class="error-text"></div>
        </div>

        <div>
            <label for="age">Age</label>
            <input type="text" id="age" readonly style="background:#f1f1f1;" />
        </div>

        <!-- Address (full width) -->
        <div class="full">
            <label for="address">Address</label>
            <textarea id="address"></textarea>
        </div>

        <!-- Country -->
        <div>
            <label for="country">Country *</label>
            <select id="country">
                <option value="">-- Select Country --</option>
                <option value="IN">India</option>
                <option value="US">United States</option>
            </select>
            <div id="countryError" class="error-text"></div>
        </div>

        <!-- State -->
        <div>
            <label for="state">State *</label>
            <select id="state">
                <option value="">-- Select State --</option>
            </select>
            <div id="stateError" class="error-text"></div>
        </div>

        <!-- City -->
        <div>
            <label for="city">City *</label>
            <select id="city">
                <option value="">-- Select City --</option>
            </select>
            <div id="cityError" class="error-text"></div>
        </div>

        <!-- Password -->
        <div>
            <label for="password">Password *</label>
            <input type="password" id="password" />
            <div class="meter"><div id="meterFill" class="meter-fill"></div></div>
            <div id="passwordError" class="error-text"></div>
        </div>

        <!-- Confirm Password -->
        <div>
            <label for="confirmPassword">Confirm Password *</label>
            <input type="password" id="confirmPassword" />
            <div id="confirmError" class="error-text"></div>
        </div>

        <!-- Terms (full width) -->
        <div class="full" style="display:flex;align-items:center;gap:12px;">
            <label style="display:flex;align-items:center;gap:8px">
                <input id="terms" type="checkbox" /> I agree to the Terms & Conditions *
            </label>
            <div id="termsError" class="error-text"></div>
        </div>

        <!-- Buttons (full width) -->
        <div class="actions full">
            <button id="submitBtn" type="submit" disabled>Submit</button>
            <button id="resetBtn" type="reset" class="secondary">Reset</button>
            <div id="feedback" style="margin-left:12px"></div>
        </div>
    </form>
</div>
</body>
<script>
    const $ = id => document.getElementById(id);

    // -------------------- DATA --------------------
    const locationData = {
      "IN": {
        "Andhra Pradesh": ["Visakhapatnam","Vijayawada","Tirupati"],
        "Arunachal Pradesh": ["Itanagar","Pasighat","Ziro"],
        "Assam": ["Guwahati","Dibrugarh","Jorhat"],
        "Bihar": ["Patna","Gaya","Bhagalpur"],
        "Chhattisgarh": ["Raipur","Bilaspur","Durg"],
        "Goa": ["Panaji","Margao","Vasco da Gama"],
        "Gujarat": ["Ahmedabad","Surat","Vadodara"],
        "Haryana": ["Gurugram","Faridabad","Panipat"],
        "Himachal Pradesh": ["Shimla","Dharamshala","Solan"],
        "Jharkhand": ["Ranchi","Jamshedpur","Dhanbad"],
        "Karnataka": ["Bengaluru","Mysuru","Mangalore"],
        "Kerala": ["Thiruvananthapuram","Kochi","Kozhikode"],
        "Madhya Pradesh": ["Bhopal","Indore","Gwalior"],
        "Maharashtra": ["Mumbai","Pune","Nagpur"],
        "Manipur": ["Imphal","Thoubal","Churachandpur"],
        "Meghalaya": ["Shillong","Tura","Nongpoh"],
        "Mizoram": ["Aizawl","Lunglei","Champhai"],
        "Nagaland": ["Kohima","Dimapur","Mokokchung"],
        "Odisha": ["Bhubaneswar","Cuttack","Rourkela"],
        "Punjab": ["Chandigarh","Ludhiana","Amritsar"],
        "Rajasthan": ["Jaipur","Jodhpur","Udaipur"],
        "Sikkim": ["Gangtok","Namchi","Geyzing"],
        "Tamil Nadu": ["Chennai","Coimbatore","Madurai"],
        "Telangana": ["Hyderabad","Warangal","Nizamabad"],
        "Tripura": ["Agartala","Udaipur","Dharmanagar"],
        "Uttar Pradesh": ["Lucknow","Noida","Varanasi"],
        "Uttarakhand": ["Dehradun","Haridwar","Nainital"],
        "West Bengal": ["Kolkata","Howrah","Durgapur"]
      },
      "US": {
        "California": ["San Francisco","Los Angeles","San Diego"],
        "New York": ["New York City","Buffalo","Albany"]
      }
    };

    const disposableDomains = ["tempmail.com","mailinator.com","10minutemail.com","dispostable.com"];

    // -------------------- GLOBALS --------------------
    const touched = {};
    let attemptedSubmit = false;

    const form = $('regForm');
    const submitBtn = $('submitBtn');
    const resetBtn = $('resetBtn');
    const feedback = $('feedback');

    // -------------------- HELPERS --------------------
function showError(id, msg) {
  // do not display UI errors unless the user has focused (touched) the field
  // or we are in an attempted submit state. Validators still return false.
  const el = $(id);
  const err = $(id + 'Error');

  if (!(touched[id] || attemptedSubmit)) {
    // ensure the field has no visible error styling when not touched
    if (el) el.classList.remove('error');
    if (err) { err.style.display = 'none'; err.textContent = ''; }
    return;
  }

  // If touched or attemptedSubmit -> show UI error
  if (el) el.classList.add('error');
  if (err) { err.style.display = 'block'; err.textContent = msg; }
}

    function clearError(id) {
      const el = $(id);
      const err = $(id + 'Error');
      if (el) el.classList.remove('error');
      if (err) { err.style.display = 'none'; err.textContent = ''; }
    }

    function calculateAge(dobStr) {
      const today = new Date();
      const dob = new Date(dobStr);
      let age = today.getFullYear() - dob.getFullYear();
      const m = today.getMonth() - dob.getMonth();
      if (m < 0 || (m === 0 && today.getDate() < dob.getDate())) age--;
      return age;
    }

    function updateMeter(score) {
      const fill = $('meterFill');
      if (!fill) return;
      fill.style.width = score + '%';
      if (score < 40) fill.style.background = '#d9534f';
      else if (score < 80) fill.style.background = '#f0ad4e';
      else fill.style.background = '#198754';
    }

    // -------------------- POPULATE --------------------
    function populateStates() {
      const c = $('country') ? $('country').value : '';
      const state = $('state');
      const city = $('city');

      if (!state || !city) return;

      state.innerHTML = '<option value="">-- Select State --</option>';
      city.innerHTML = '<option value="">-- Select City --</option>';

      if (!locationData[c]) return;

      Object.keys(locationData[c]).forEach(s => {
        const opt = document.createElement('option');
        opt.value = s; opt.textContent = s;
        state.appendChild(opt);
      });
    }

    function populateCities() {
      const c = $('country') ? $('country').value : '';
      const st = $('state') ? $('state').value : '';
      const city = $('city');
      if (!city) return;

      city.innerHTML = '<option value="">-- Select City --</option>';
      if (!locationData[c] || !locationData[c][st]) return;

      locationData[c][st].forEach(ct => {
        const opt = document.createElement('option');
        opt.value = ct; opt.textContent = ct;
        city.appendChild(opt);
      });
    }

    function updateCountryCode() {
      const c = $('country') ? $('country').value : '';
      if ($('countryCode')) {
        if (c === 'IN') $('countryCode').value = '+91';
        else if (c === 'US') $('countryCode').value = '+1';
        else $('countryCode').value = '+';
      }
    }

    // -------------------- VALIDATORS --------------------
    function validateDOB() {
      const dobEl = $('dob');
      if (!dobEl) return true;
      const dob = dobEl.value.trim();
      if (!dob) { showError('dob','DOB is required'); return false; }
      const format = /^\d{4}-\d{2}-\d{2}$/;
      if (!format.test(dob)) { showError('dob','Use YYYY-MM-DD'); return false; }
      const age = calculateAge(dob);
      if (isNaN(age) || age < 0 || age > 120) { showError('dob','Invalid DOB'); return false; }
      clearError('dob');
      if ($('age')) $('age').value = age;
      return true;
    }

    function validateFirstName() {
      const el = $('firstName');
      if (!el) return true;
      const v = el.value.trim();
      if (!v) { showError('firstName','Required'); return false; }
      clearError('firstName'); return true;
    }

    function validateLastName() {
      const el = $('lastName');
      if (!el) return true;
      const v = el.value.trim();
      if (!v) { showError('lastName','Required'); return false; }
      clearError('lastName'); return true;
    }

    function validateEmail() {
      const el = $('email');
      if (!el) return true;
      const v = el.value.trim();
      if (!v) { showError('email','Required'); return false; }
      const pattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!pattern.test(v)) { showError('email','Invalid'); return false; }
      const dom = v.split('@')[1].toLowerCase();
      if (disposableDomains.includes(dom)) { showError('email','Disposable not allowed'); return false; }
      clearError('email'); return true;
    }

    function validatePhone() {
      const ccEl = $('countryCode');
      const pnEl = $('phoneNumber');
      if (!pnEl) return true;
      const cc = ccEl ? ccEl.value.trim() : '';
      const num = pnEl.value.trim().replace(/\D/g,'');

      if (!num) { showError('phone','Required'); return false; }

      if (cc === '+91') {
        if (!/^[6-9]\d{9}$/.test(num)) { showError('phone','Invalid Indian number'); return false; }
      } else if (cc === '+1') {
        if (!/^\d{10}$/.test(num)) { showError('phone','Invalid US number'); return false; }
      } else {
        if (!/^\d{7,15}$/.test(num)) { showError('phone','Invalid number'); return false; }
      }

      clearError('phone');
      return true;
    }

    function validateGender() {
      const g = document.querySelector('input[name="gender"]:checked');
      if (!g) { showError('gender','Required'); return false; }
      clearError('gender'); return true;
    }

    function validateCountry() {
      const el = $('country');
      if (!el) return true;
      if (!el.value) { showError('country','Required'); return false; }
      clearError('country'); return true;
    }

    function validateState() {
      const el = $('state');
      if (!el) return true;
      if (!el.value) { showError('state','Required'); return false; }
      clearError('state'); return true;
    }

    function validateCity() {
      const el = $('city');
      if (!el) return true;
      if (!el.value) { showError('city','Required'); return false; }
      clearError('city'); return true;
    }

    function validatePassword() {
      const el = $('password');
      if (!el) return true;
      const p = el.value;
      if (!p) { showError('password','Required'); updateMeter(0); return false; }
      if (p.length < 8) { showError('password','Min 8 chars'); updateMeter(20); return false; }

      let score = 40;
      if (/[0-9]/.test(p)) score += 20;
      if (/[A-Za-z]/.test(p)) score += 20;
      if (/[!@#$%^&*]/.test(p)) score += 20;
      updateMeter(score);

      clearError('password');

      const cp = $('confirmPassword');
      if (cp && cp.value && cp.value !== p) { showError('confirmPassword','Mismatch'); return false; }
      clearError('confirmPassword');
      return true;
    }

    function validateConfirmPassword() {
      const pEl = $('password');
      const cpEl = $('confirmPassword');
      if (!cpEl) return true;
      const cp = cpEl.value;
      if (!cp) { showError('confirmPassword','Required'); return false; }
      if (pEl && pEl.value !== cp) { showError('confirmPassword','Mismatch'); return false; }
      clearError('confirmPassword'); return true;
    }

    function validateTerms() {
      const el = $('terms');
      if (!el) return true;
      if (!el.checked) { showError('terms','Required'); return false; }
      clearError('terms'); return true;
    }

    // ---------- Normal validateForm ----------
    function validateForm() {
      const checks = [
        validateFirstName(),
        validateLastName(),
        validateEmail(),
        validatePhone(),
        validateGender(),
        validateDOB(),
        validateCountry(),
        validateState(),
        validateCity(),
        validatePassword(),
        validateConfirmPassword(),
        validateTerms()
      ];
      const ok = checks.every(Boolean);
      if (submitBtn) submitBtn.disabled = !ok;
      return ok;
    }

    // -------------------- EVENTS --------------------
    document.querySelectorAll('input, select, textarea').forEach(el => {
      const id = el.id || el.name;

      el.addEventListener('focus', () => {
        if (id) touched[id] = true;
      });

      el.addEventListener('input', () => {
        switch(id) {
          case 'firstName': validateFirstName(); break;
          case 'lastName': validateLastName(); break;
          case 'email': validateEmail(); break;
          case 'dob': validateDOB(); break;
          case 'phoneNumber': validatePhone(); break;
          case 'password': validatePassword(); break;
          case 'confirmPassword': validateConfirmPassword(); break;
          case 'country': validateCountry(); populateStates(); updateCountryCode(); break;
          case 'state': validateState(); populateCities(); break;
          case 'city': validateCity(); break;
          case 'terms': validateTerms(); break;
          default:
            if (el.name === 'gender') validateGender();
        }
        validateForm();
      });

      // Prevent Enter submission
      el.addEventListener('keydown', e => {
        if (e.key === 'Enter' && el.tagName.toLowerCase() !== 'textarea') e.preventDefault();
      });
    });

    // Auto-format DOB as YYYY-MM-DD
    const dobEl = $('dob');
    if (dobEl) {
      dobEl.addEventListener('input', () => {
        let v = dobEl.value.replace(/[^0-9]/g,'');
        if (v.length >= 4) v = v.slice(0,4) + "-" + v.slice(4);
        if (v.length >= 7) v = v.slice(0,7) + "-" + v.slice(7);
        dobEl.value = v.slice(0,10);
      });
    }

    // Reset handler (fixed)
    if (resetBtn) {
      resetBtn.addEventListener('click', () => {
        setTimeout(() => {
          Object.keys(touched).forEach(k => delete touched[k]);
          attemptedSubmit = false;
          document.querySelectorAll('.error-text').forEach(e => { e.style.display='none'; e.textContent=''; });
          document.querySelectorAll('.error').forEach(e => e.classList.remove('error'));
          updateMeter(0);
          if (submitBtn) submitBtn.disabled = true;
          if (feedback) feedback.innerHTML = '';
          updateCountryCode();
          populateStates();
          populateCities();
          if ($('age')) $('age').value = '';
        }, 10);
      });
    }

    // Submit handler
    if (form) {
      form.addEventListener('submit', e => {
        e.preventDefault();
        attemptedSubmit = true;

        document.querySelectorAll('input, select, textarea').forEach(el => {
          touched[el.id || el.name] = true;
        });

        if (!validateForm()) {
          if (feedback) feedback.innerHTML = '<div class="error-text">Fix errors before submitting</div>';
          return;
        }

        if (submitBtn) submitBtn.disabled = true;
        if (feedback) feedback.innerHTML = '<div class="note">Submitting...</div>';

        setTimeout(() => {
          if (feedback) feedback.innerHTML = '<div class="success-text">✅ Registration Successful!</div>';
          setTimeout(() => {
            if (form) form.reset();
            updateMeter(0);
            if (submitBtn) submitBtn.disabled = true;
            attemptedSubmit = false;
            Object.keys(touched).forEach(k => delete touched[k]);
            updateCountryCode();
            populateStates();
            populateCities();
            if ($('age')) $('age').value = '';
          }, 600);
        }, 800);
      });
    }


    // -------------------- INIT --------------------
    (function () {
      populateStates();
      populateCities();
      updateCountryCode();
      updateMeter(0);
      if (submitBtn) submitBtn.disabled = true;
    })();
</script>


</html>

